<Page x:Class="WpfApp1_IC.Pages.CameraBasicPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="CameraBasicPage">
    <Page.Resources>

        <!-- === СТИЛЬ ДЛЯ ПОКАЗА/СКРЫТИЯ ИЗОБРАЖЕНИЯ (ГЛАЗ) === -->
        <Style x:Key="ImageToggleStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">
                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">

                            <Canvas Width="20" Height="20">
                                <!-- Контур глаза -->
                                <Path x:Name="EyeOutline"
                              Stroke="Red"
                              StrokeThickness="2"
                              Fill="White"
                              Data="M1,10 C4,3 12,3 15,10 C12,17 4,17 1,10 Z"/>

                                <!-- Зрачок -->
                                <Ellipse x:Name="Pupil"
                                 Fill="Black"
                                 Width="6" Height="6"
                                 Canvas.Left="7" Canvas.Top="7"/>
                            </Canvas>

                            <TextBlock x:Name="Label"
                               Text="Показать изображение"
                               Margin="8,0,0,0"
                               VerticalAlignment="Center"/>
                        </StackPanel>

                        <ControlTemplate.Triggers>

                            <!-- Включено -->
                            <Trigger Property="IsChecked" Value="True">
                                <!-- Перечёркиваем глаз -->
                                <Setter TargetName="EyeOutline" Property="Data"
                                Value="M1,10 C4,3 12,3 15,10 C12,17 4,17 1,10 Z M0,0 L16,20 M16,0 L0,20"/>
                                <Setter TargetName="Label" Property="Text" Value="Скрыть изображение"/>
                            </Trigger>

                            <!-- Наведение -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="EyeOutline" Property="Stroke" Value="#DDDDDD"/>
                                <Setter TargetName="Pupil" Property="Fill" Value="#222"/>
                                <Setter TargetName="Label" Property="Foreground" Value="#CCCCCC"/>
                            </Trigger>

                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>


        <!-- === СТИЛЬ ДЛЯ ПОКАЗА/СКРЫТИЯ ЛОГОВ (ДОКУМЕНТ) === -->
        <Style x:Key="LogToggleStyle" TargetType="CheckBox">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="CheckBox">

                        <StackPanel Orientation="Horizontal" VerticalAlignment="Center">

                            <Canvas Width="20" Height="20">

                                <!-- Контур документа -->
                                <Path x:Name="DocOutline"
                              Stroke="#ff6d00"
                              StrokeThickness="2"
                              Fill="White"
                              Data="M3,1 H13 V19 H3 Z"/>

                                <!-- Строка 1 -->
                                <Rectangle x:Name="Line1"
                                   Fill="Black"
                                   Width="10" Height="2"
                                   RadiusX="1" RadiusY="1"
                                   Canvas.Left="4" Canvas.Top="5"/>

                                <!-- Строка 2 -->
                                <Rectangle x:Name="Line2"
                                   Fill="Black"
                                   Width="10" Height="2"
                                   RadiusX="1" RadiusY="1"
                                   Canvas.Left="4" Canvas.Top="9"/>

                                <!-- Строка 3 -->
                                <Rectangle x:Name="Line3"
                                   Fill="Black"
                                   Width="10" Height="2"
                                   RadiusX="1" RadiusY="1"
                                   Canvas.Left="4" Canvas.Top="13"/>

                            </Canvas>

                            <TextBlock x:Name="Label"
                               Text="Показать лог"
                               Margin="8,0,0,0"
                               VerticalAlignment="Center"/>
                        </StackPanel>

                        <ControlTemplate.Triggers>

                            <!-- Включено (лог скрыт) -->
                            <Trigger Property="IsChecked" Value="True">
                                <!-- Перечёркивание -->
                                <Setter TargetName="DocOutline" Property="Data"
                                Value="M3,1 H13 V19 H3 Z M0,0 L20,20 M20,0 L0,20"/>
                                <Setter TargetName="Label" Property="Text" Value="Скрыть лог"/>
                            </Trigger>

                            <!-- Наведение -->
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="DocOutline" Property="Stroke" Value="#DDDDDD"/>
                                <Setter TargetName="Line1" Property="Fill" Value="#222"/>
                                <Setter TargetName="Line2" Property="Fill" Value="#222"/>
                                <Setter TargetName="Line3" Property="Fill" Value="#222"/>
                                <Setter TargetName="Label" Property="Foreground" Value="#CCCCCC"/>
                            </Trigger>

                        </ControlTemplate.Triggers>

                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Page.Resources>


    <Grid Margin="10" >
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/> <!-- Панель управления -->
            <RowDefinition Height="Auto"/> <!-- DataMatrix -->
            <RowDefinition x:Name="ImageRow" Height="3*"/> <!-- Изображение -->
            <RowDefinition x:Name="LogRow" Height="2*"/> <!-- Лог -->
        </Grid.RowDefinitions>

        <!--  Панель управления -->
        <StackPanel Orientation="Horizontal"
                    Grid.Row="0"
                    Margin="0,0,0,10">

            <!--  Старт / Стоп -->
            <Button Width="40" Height="30"
                    Background="Transparent"
                    BorderThickness="0"
                    ToolTip="Старт"
                    Click="StartStop_Click">
                <Path x:Name="StartStopIcon"
                      Fill="Green"
                      Stretch="Uniform"
                      Data="M 0 0 L 0 20 L 17 10 Z"/>
            </Button>


            <!-- Показать / скрыть изображение -->
            <CheckBox x:Name="ShowImageCheck"
          Style="{StaticResource ImageToggleStyle}"
          Margin="20,0,0,0"
          Checked="ShowImageCheck_Changed"
          Unchecked="ShowImageCheck_Changed"/>

            <CheckBox x:Name="ShowLogCheck"
          Style="{StaticResource LogToggleStyle}"
          Margin="20,0,0,0"
          Checked="ShowLogCheck_Changed"
          Unchecked="ShowLogCheck_Changed"/>

        </StackPanel>

        <!-- DataMatrix -->
        <TextBox x:Name="DmTextBox"
                 Grid.Row="1"
                 Height="30"
                 FontSize="19"
                 IsReadOnly="True"
                 VerticalContentAlignment="Center"
                 Background="#FFF9F9F9"
                 Margin="0,0,0,10"/>

        <!-- Изображение -->
        <Border Grid.Row="2"
                BorderBrush="#CCC"
                BorderThickness="1"
                Margin="0,0,0,10">
            <Image x:Name="CameraImage"
                   Stretch="Uniform"
                   Visibility="Visible"/>
        </Border>

        <!-- Лог -->
        <Border Grid.Row="3"
                Background="#1E1E1E">
            <TextBox x:Name="LogTextBox"
                     IsReadOnly="True"
                     Foreground="LightGreen"
                     Background="Transparent"
                     FontSize="14"
                     VerticalScrollBarVisibility="Auto"
                     Margin="10"/>
        </Border>
    </Grid>
</Page>
